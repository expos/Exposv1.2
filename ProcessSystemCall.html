<html>
<head>
<title>Process System Call</title>
<link rel="stylesheet" type="text/css" href="./main.css"/>
</head>
<body>

<h1>Process System Calls</h1>




<div id="nav">
<div id="nav1">
<ul>
<li><a href="index.html">Home</a>
<li><a href="MachineSpecIntro.html">Machine Specification(Intro)</a>
<li><a href="Registers.html">Registers</a>
<li><a href="Memory.html">Memory</a>
<li><a href="Process.html">Process</a>
<li><a href="Instructions.html">Instructions</a>
<li><a href="Interrupt.html">Interrupt</a>
<li><a href="FileSystem.html">File System</a>
<li><a href="OSIntroduction.html">OS Introduction</a>
<li><a href="OSStartupCode.html">OS Startup Code</a>
<li><a href="Halt.html">Halt</a>
<li><a href="FileSystemCalls.html">File System Call</a>
<li><a href="Multiprogramming.html">Multi-Programming</a>
<li><a href="ProcessSystemCall.html">Process System Call</a>
<li><a href="Conclusion.html">Conclusion</a>
<li><a href="SPSIL.html">SPSIL</a>
<li><a href="APSIL.html">APSIL</a>
<li><a href="Bibliography.html">Bibliography</a>
</ul>
</div>


<div id="nav2">
<p class="nav2">
Download as pdf
</p>
<ul>
<li><a href="./pdf/machineSpec.pdf">Machine Spec</a>
<li><a href="./pdf/apsil.pdf">APSIL</a>
<li><a href="./pdf/spsil.pdf">SPSIL</a>
</ul>
</div>
</div>



<div id="main">
<h2>Process System Calls</h2>
<p>
<i>Process system calls</i> are used by a process when it has to duplicate itself, execute a new process in its place or when it has to terminate itself. There are three process system calls. An interrupt is associated with each system call. All the necessary arguments for a system call are available in the user stack with the system call number as the last argument.
</p>
<p>
Interrupt specifications for different <i>Process system calls</i> are as follows:
</p>
<h3>INT 5</h3>
<p>
The process system call <i>Fork</i> invokes INT 5. INT 5 handles these system calls as follows.
</p>
<p>
<b>Fork :</b>  This system call is used to create a new process having the same code area, data area and list of open files as that of the process which invoked this system call.
The new process that is created is known as the <em>child</em> process, and the process which invoked this system call is known as its <em>parent</em>.
</p>
<p>
The register values in the PCB of the child process are initialized with the current register contents.
</p>
<div>Syntax : <tt>int Fork()</tt> </div>
<div>Syscall no :  8</div>
<ul>
	<li> A vacant entry is searched for in the <em>Ready list</em>.
	<li> If no entry is found, in the case when there are already 12 processes that are active, an appropriate error code is returned.
	<li> The index of this vacant ready list entry is the PID for the child process that is created.
	<li> The PID entry in the PCB of the child process is updated with this new PID.
	<li> All the registers (except PID) and the local file table of the parent process is replicated in the PCB of the child process.
	<li> The code pages, the data page and the stack page of the parent process is replicated for this child process.
	<li> The control is returned back to the parent process.
	<li> The return value of this system call is the PID of the child process.
</ul>

<h3>INT 6</h3>
<p>
The process system call <i>Exec</i> invokes INT 6. INT 6 handles these system calls as follows.
</p>
<p>
<b>Exec :</b>  This system call is used to load the program, whose name is specified in the argument, in the memory space of the current process and start its execution .
</p>
<div>Syntax : <tt>int Exec(filename)</tt> </div>
<div>Syscall no : 9</div>
<ul>
	<li> The entire process area of the currently executing process is replaced by that of the program specified in the argument (<tt>filename</tt>). 
	<li> If the file specified by <tt>filename</tt> is not an executable then, an appropriate error code is returned.
	<li> The memory copy of the FAT is searched to get the location of the basic block of the file specified by <tt>filename</tt>, which is then loaded into the scratchpad.
	<li> This is then used to get the location in the disk of the blocks of the file to be loaded.
	<li> The 2 code blocks and 1 data block of the file are loaded from the disk into the corresponding locations in the memory of the code blocks and data block of the current process.
	<li> The PCB of the current process is modified to hold the values for that of the new process. The PID and page table, however, remains unchanged.
	<li> The return value of this system call is 1 in case of a failure. Nothing is returned in case of a success.
</ul>

<h3>INT 7</h3>
<p>
The process system call <i>Exit</i> invokes INT 7. INT 7 handles this system call as follows.
</p>
<p>
<b>Exit :</b>  This system call is used to terminate the execution of the process which invoked it and removes it from the memory . It loads the next available process.
</p>
<div>Syntax :  <tt>Exit()</tt>  </div>
<div>Syscall no : 10</div>
<ul>
	<li> The entire address space of the currently executing process is set free by setting a value 0 in the memory free list corresponding to the pages occupied by that process.
	
	<li> The local file table is traversed and the global file table entry is removed.
	
	<li> The ready list entry corresponding to this process is set to zero thereby releasing all the data structures used by the process.
	
	<li> The ready list is then searched for the next available process. The INIT process is excluded in this search. If one such process is found, the PID is updated with the index of this entry in the ready list. If no such process is found, then the PID is set to the index of the INIT process in the ready list.
	
	<li> All the registers of the machine are initialised with their corresponding values obtained from the PCB of the process specified by the new PID.
	
	<li> The process switches from <i>Kernel mode</i> to <i>User mode</i>.
</ul>

<h2>INIT Process</h2>
<p>
The INIT process is the first user process loaded by the OS on the OS startup. The specification of INIT process is as follows:
<ul>
	<li>  It provides an interface for the users to run other user programs.
	<li> The user enters the name of a valid executable file (which should be made available in the disk) in the shell. If the specified file is not found, an appropriate error code is returned.
	<li> If the specified executable file is found, the INIT process forks and does exec on the that file.
	<li> Entering the keyword HALT instead of the name of an executable file invokes the Shutdown system call.
</ul>
</p>
<p>
All the user processes other than INIT are added to entries 1-11 of the ready queue keeping the 0th entry (corresponding to INIT) untouched. INIT loads the first process and thereafter all context switches occur among the other processes in the ready queue. INIT is switched back only when the ready queue (entries 1-11) is free so that the user can load another executable file via the shell. 
</p>


<div id="nav3"><div id="prev"><a href="./Multiprogramming.html">Prev</a></div>
<div id="next"><a href="./Conclusion.html">Next</a></div>
</div>
</div>
</body>
</html>