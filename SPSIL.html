<html>
<head>
<title>SPSIL</title>
<link rel="stylesheet" type="text/css" href="./main.css"/>
</head>
<body>
<h1>SPSIL</h1>



<div id="nav">
<div id="nav1">
<ul>
<li><a href="index.html">Home</a>
<li><a href="MachineSpecIntro.html">Machine Specification(Intro)</a>
<li><a href="Registers.html">Registers</a>
<li><a href="Memory.html">Memory</a>
<li><a href="Process.html">Process</a>
<li><a href="Instructions.html">Instructions</a>
<li><a href="Interrupt.html">Interrupt</a>
<li><a href="FileSystem.html">File System</a>
<li><a href="OSIntroduction.html">OS Introduction</a>
<li><a href="OSStartupCode.html">OS Startup Code</a>
<li><a href="Halt.html">Halt</a>
<li><a href="FileSystemCalls.html">File System Call</a>
<li><a href="Multiprogramming.html">Multi-Programming</a>
<li><a href="ProcessSystemCall.html">Process System Call</a>
<li><a href="Conclusion.html">Conclusion</a>
<li><a href="SPSIL.html">SPSIL</a>
<li><a href="APSIL.html">APSIL</a>
<li><a href="Bibliography.html">Bibliography</a>
</ul>
</div>


<div id="nav2">
<p class="nav2">
Download as pdf
</p>
<ul>
<li><a href="./pdf/machineSpec.pdf">Machine Spec</a>
<li><a href="./pdf/apsil.pdf">APSIL</a>
<li><a href="./pdf/spsil.pdf">SPSIL</a>
</ul>
</div>
</div>


<div id="main">

<h2>Introduction</h2>
<p>
<i>SPSIL</i> or <i>System Programmer's Simple Integer Language</i> is an untyped programming language designed for implementation of an operating system on ESIM <i>(Extended Simple Integer Machine)</i> architecture. The language is minimalistic and consists only of basic constructs required for the implementation. Programming using SPSIL requires a  basic understanding of the underlying ESIM architecture and operating system concepts. 
</p>

<h2>Lexical Elements</h2>


<h3>Comments and White Spaces</h3>
<p>
SPSIL allows only single line comments. Comments start with the character sequence <b>//</b> and stop at the end of the line. 
White spaces in the program including tabs, newline and horizontal spaces are ignored.
</p>

<h3>Keywords</h3>
<p>
The following are the reserved words in SPSIL and it cannot be used as identifiers.
</p>
<code>
<table>

<tr>
<td>alias</td><td>else</td><td>if</td><td>store</td><td>while</td>
<tr>
<td>define</td><td>endif</td><td>ireturn</td><td>strcmp</td><td>continue</td>
<tr>
<td>break</td><td>do</td><td>endwhile</td><td>load</td><td>then</td>

</table>
</code>



<h3>Operators and Delimiters</h3>
<p>
The following are the operators and delimiters in SPSIL
</p>
<code>
<table>
<tr>
<td>( 		</td><td> 		) 		</td><td>			;		 </td><td>			[		</td><td>		 ]    </td><td>
/		 			</td><td> 		*		</td><td>		+ 		</td><td> 		-  		</td><td> 	% </td>
<tr>
<td>&gt;  		</td><td>	   &lt;  </td><td>  &gt;= 	</td><td>  &lt;=	</td><td>	    !=		</td><td>	==	 </td><td>	= </td><td>&&  	 </td><td>	||	</td><td>	!</td>
</table>
</code>



<h3>Registers</h3>
<p>
SPSIL allows the use of 20 registers for various operations.(R0-R7, S0-S7, BP, SP, IP, PID)
</p>

<h3>Identifiers</h3>
<p>
Identifiers are used as symbolic names for constants and aliases for registers. Identifiers should start with an alphabet but may contain alphabets, digits and/or underscore (_). No other special characters are allowed in identifiers.  
</p>

<h3>Literals</h3>
<p>
Only integer literals are permitted in SPSIL. An integer literal is a sequence of digits representing an integer. Negative integers are represented with a negative sign preceding the sequence of digits.  
</p>



<h2>Register Set</h2>
<p>
SPSIL doesn't allow the use of declared variables. Instead a fixed set of registers is provided. The register set in SPSIL contains 20 registers. There is a direct mapping between these registers and the machine registers in ESIM.
</p>

<table>
<td>R0-R7 </td><td> Program Registers </td>
<tr>
<td>S0-S7 </td><td> Kernel Registers </td>
<tr>
<td>BP 		</td><td> Base Pointer </td>
<tr>
<td>SP		</td><td> Stack Pointer </td>
<tr>
<td>IP		</td><td> Instruction Pointer </td>
<tr>
<td>PID	</td><td> Process Identifier </td>
</table>


<h2>Aliasing</h2>
<p>
Any register can be referred to by using a different name. A name is assigned to a particular register using the <b>alias</b> keyword. Each register can be assigned to only one alias at any particular point of time. However, a  register can be reassigned to a different alias at a later point. Aliasing can also be done inside the <b>if</b> and <b>while</b> block. However, the alias will only be valid within the if and while block it is defined in. The already defined alias for the register(if any) will only be hidden inside if and while blocks. No two registers can have the same alias name simultaneously.
</p>


<h2>Constants</h2>
<p>
Symbolic names can be assigned to values using the <b>define</b> keyword. Unlike aliasing, two or more names can be assigned to the same value. A constant can only be defined once in a program.
</p>
	
<h3>Predefined Constants</h3>
<p>
SPSIL provides a set of predefined constants. These predefined constants can be assigned to different values explicitly by the user using <b>define</b> keyword. These constants are mostly starting addresses of various OS components in the memory.
</p>
<p>
The predefined set of constants provided in SPSIL are:
<table>
<th>Name </th><th> Default Value </th>
<tr>
<td>SCRATCHPAD 	</td><td> 	256 </td>
<tr>
<td>PAGE_TABLE 	</td><td> 	512  </td>
<tr>
<td>MEM_LIST 	</td><td>	576 	</td>
<tr>
<td>FILE_TABLE 	</td><td> 	640		</td>
<tr>
<td>READY_LIST 	</td><td> 	736	</td>
<tr>
<td>PROC_TABLE 	</td><td> 	767 </td>
<tr>
<td>FAT 		</td><td> 	1024    </td>
<tr>
<td>DISK_LIST 	</td><td> 	1536 	</td>
<tr>
<td>USER_PROG 	</td><td> 	1792	</td>
<tr>
<td>INTERRUPT </td><td> 	13824	</td>
</table>
</p>


<h2>Expressions</h2>
<p>
An expression specifies the computation of a value by applying operators to operands. SPSIL supports arithmetic and logical expressions.
</p>

<h3>Arithmetic Expressions</h3>
<p>
Registers, constants, and 2 or more arithmetic expressions connected using arithmetic operators are categorized as arithmetic expressions. SPSIL provides five arithmetic operators, viz., +, -, *, / (Integer Division) and % (Modulo operator) through which arithmetic expressions may be combined. Expression syntax and semantics are similar to standard practice in programming languages and normal rules of precedence, associativity and paranthesization hold. 
</p>

<h3>Logical Expressions</h3>
<p>
Logical expressions may be formed by combining arithmetic expressions using relational operators. The relational operators supported by SPSIL are  &gt;, &lt;, &gt;=, &lt;=, ==, !=

Standard  meanings apply to these operators. A relational operator will take in two arguments and return 1 if the relation is valid and 0 otherwise. Logical expressions themselves may be combined using logical operators, && (logical and) ,  || (logical or) and ! (not).
</p>
<h3>String Comparison</h3>
<p>
The only operation that can be performed on strings stored in memory is string camparison. <b>strcmp</b> is used to compare two strings whose address is stored in the registers that are given as operands.
</p>
<p class="example">
 e.g. <i>strcmp(R2,R5)</i>
</p>

<h3>Addressing Expression</h3>
<p>
Memory of the meachine can be directly accessed in an SPSIL program. A word in the memory is accessed by specifying the addressing element, i.e. memory location within [ ]. This  corresponds to the value stored in the given address. An arithmetic expression or an addressing expression can be used to specify the address.
</p>
<p class="example">
Examples of addressing expressions:
 [1024], [R3], [R5+[S7]+128], [FAT + (PID*16) + S2] etc.
</p>

<h2>Statements</h2>
<p>
Statements control the execution of the program. All statements in SPSIL are terminated with a semicolon ;
</p>


<h3>Define Statement</h3>
<p>
Define statement is used to define a symbolic name for a value. Define statements should be  used before any other statment in an SPSIL program. The keyword <b>define</b> is used to associate a literal to a symbolic name.
</p>

<div class="syntax">
define constant_name value;
</div>

<h3>Alias Statement</h3>
<p>
An <b>alias</b> statement is used to  associate a register with a name. <b>Alias</b> statements can be used anywhere in the program except within <b>if</b> and <b>while</b> statements.
</p>
<div class="syntax">alias  alias_name register_name ;</div>


<h3>Assignment Statement</h3>
<p>
The SPSIL assignment statement assigns the value of an  expression or value stored in a memory address to a register or a memory address. <b>=</b> is the assignment operator used in SPSIL. The operand on the right hand side of the operator is assigned to the left hand side. The general syntax is as follows:
</p>
<div class="syntax">
Register /Alias  /[Address] = Expression / [Address] ;
</div>

<h3>strcpy Statement</h3>
<p>
The SPSIL <b>strcpy</b> statement copies a string in one memory location to another memory location. Registers which store the  memory location of the destination and the source are given as R<sub>d</sub> and R<sub>s</sub> respectively.
</p>
<div class="syntax">
strcpy(R<sub>d</sub>, R<sub>s</sub>);
</div>

<h3>If Statement</h3>
<p>
<b>if</b> statements specify the conditional execution of two branches according to the value of a logical expression. If the expression evaluates to 1, the <b>if</b> branch is executed, otherwise the <b>else</b>  branch is executed. The <b>else</b> part is optional. The general syntax is as follows:
</p>
<div class="syntax">
if (logical expression) then<br/>
 &nbsp;statements;<br/>
else<br/>
&nbsp;statements;<br/>
endif;

</div>


<h3>While Statement</h3>
<p>
<b>while</b> statement iteratively executes a set of statements based on a condition. The condition is defined using a logical expression.  The statements are iteratively executed as long as the condition is true.
</p>
<div class="syntax">
while (logical expression) do<br/>
&nbsp;statements; <br/>
endwhile;
</div>

<h3>Break statement</h3>
<p>
<b>break</b> statement is a statement which is used in a while loop block. This statement stops the execution of the loop in which it is used and passes the control of execution to the next statement after the loop. This statement cannot be used anywhere else other than while loop. The syntax is as follows:
</p>
<div class="syntax">
break;
</div>

<h3>Continue statement</h3>
<p>
<b>continue</b> statement is a statement which is also used only in a while loop block. This statement skips the current iteration of the loop and passes the control to the next iteration after checking the loop condition. The syntax is as follows:
</p>
<div class="syntax">
continue;
</div>

<h3>ireturn Statement</h3>
<p>
<b>ireturn</b> statement is used to pass control from kernel mode to user mode. The <b>ireturn</b> is generally used at the end of an interrupt code.
</p>
<div class="syntax">
ireturn;
</div>

<h3>Load / Store Statements</h3>
<p>
Loading and storing between filesystem and memory is accomplished using <b>load</b> and <b>store</b> statements in SPSIL. <b>load</b> statement loads the block specified by <i>block_number</i> from the disk to the the page speficied by the <i>page_number</i> in the memory. <b>store</b> statement stores the page specified by <i>page_number</i> in the memory to the the block speficied by the <i>block_number</i> in the disk. The page number and block number can be specified using arithmetic expressions.
</p>
<div class="syntax">
load (page_number, block_number);
<br/>
store (page_number, block_number);
</div>


<div id="nav3"><div id="prev"><a href="./Conclusion.html">Prev</a></div>
<div id="next"><a href="./APSIL.html">Next</a></div>
</div>
</div>
</body>
</html>